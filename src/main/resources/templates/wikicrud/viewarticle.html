
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Wiki Articles</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/css/viewarticle.css}">
</head>

<body th:style="'background-color:' + ${randomColor}">

    <div th:replace="fragments/navbar :: topnav"></div>
    <!--ifmaxxing: probably bad practice but TIME is of the ESSENCE-->
    <div th:if="${article != null and (!article.hiddenFlag or session.loggedInAdmin != null)}">
        <h1 class="articletitle" th:text="${article.title}">Article Title</h1>

        <!--admin interface-->
        <div th:if="${session.loggedInAdmin != null}" style="display: flex; gap: 10px; align-items: center;">
            <a th:href="@{'/wiki/articles/' + ${article.id} + '/update'}">Update</a>

            <form th:action="@{'/wiki/articles/' + ${article.id} + '/delete'}" method="post">
                <input type="hidden" name="articleId" th:value="${article.id}" />
                <button type="submit" onclick="return confirm('Are you sure you want to delete this article?')"
                    style="font-size:16px;font-family:'Comic Sans MS';background:none;border:none;color:red;text-decoration:underline;cursor:pointer;">
                    Delete
                </button>
            </form>
        </div>

        <hr>

        <div><strong>Created:</strong> <span class="articlemetadata" th:text="${article.dateCreate}">Date</span></div>
        <div><strong>Last Edited:</strong> <span class="articlemetadata" th:text="${article.dateEdit}">dateEdit</span></div>
        <div>
            <strong>Tags:</strong>
            <a th:each="tag : ${article.tags}"
            th:href="@{'/wiki/articles/search?tags=' + ${tag.name}}"
            th:text="${tag?.name}"
            class="taglinks">Tag</a>
        </div>
        <div th:if="${article.category != null}">
            <strong>Category:</strong>
            <a th:href="@{'/wiki/categories/' + ${article.category.id}}"
               th:text="${article.category.name}"
               class="taglinks">Category</a>
        </div>
        <hr>

        <div class="articlecontent" th:utext="${article.contents}">Contents</div>
    </div>

    <!--Hidden Article handling-->
    <div th:if="${article != null and (article.hiddenFlag == true and session.loggedInAdmin == null)}">
        <h1>403, man!</h1>
        Sorry! Article is tucked away.
    </div>

    <!--Invalid ID handling-->
    <div th:if="${article == null}">
        <h1>404, man!</h1>
        No article was found with that ID.
    </div>
    <br>

            </li>
        </ul>
        
    </div>
</body>



</html>
